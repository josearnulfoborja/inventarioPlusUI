<div class="w-full min-h-screen bg-white p-8">
  <div class="flex justify-between items-center pb-4">
    <span class="text-2xl font-semibold">Especialistas</span>
    <button class="text-primary font-medium hover:underline bg-transparent border-0 p-0" (click)="mostrarFormulario = true; editMode = false; especialistaForm.reset({disponibilidad: true})">+ Nuevo Especialista</button>
  </div>
  <div>
    <div *ngIf="loading" class="text-center py-6">Cargando...</div>

    <table *ngIf="!loading && especialistas.length" class="w-full bg-white border">
      <thead class="bg-gray-100">
        <tr>
          <th class="px-4 py-2 text-left">Nombre</th>
          <th class="px-4 py-2 text-left">Disponibilidad</th>
          <th class="px-4 py-2 text-center">Acciones</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let esp of especialistas" class="border-b hover:bg-gray-50">
          <td class="px-4 py-2">{{ esp.nombre }}</td>
          <td class="px-4 py-2">
            <span [class]="esp.disponibilidad === 'Disponible' ? 'text-green-600' : 'text-gray-500'">
              {{ esp.disponibilidad }}
            </span>
          </td>
          <td class="px-4 py-2 text-center">
            <button class="mr-2 text-yellow-600 bg-transparent border-0 p-0" (click)="editarEspecialista(esp); mostrarFormulario = true">Editar</button>
            <button class="text-red-600 bg-transparent border-0 p-0" (click)="eliminarEspecialista(esp.idEspecialista!)">Eliminar</button>
          </td>
        </tr>
      </tbody>
    </table>

    <div *ngIf="!loading && !especialistas.length" class="text-center text-gray-500 py-8">No hay especialistas registrados.</div>

    <div *ngIf="mostrarFormulario" class="mt-8 max-w-2xl mx-auto">
      <form [formGroup]="especialistaForm" (ngSubmit)="guardarEspecialista()" class="mb-4 bg-gray-50 p-6 rounded shadow">
        <div class="form-group mb-4">
          <label class="block mb-1 font-medium">Nombre</label>
          <input formControlName="nombre" class="form-control w-full" [class.is-invalid]="especialistaForm.get('nombre')?.invalid && especialistaForm.get('nombre')?.touched">
        </div>
        <div class="form-group mb-4">
          <label class="block mb-1 font-medium">Disponibilidad</label>
          <select formControlName="disponibilidad" class="form-control w-full">
            <option [ngValue]="true">Disponible</option>
            <option [ngValue]="false">No disponible</option>
          </select>
        </div>
        <div class="flex gap-2">
          <button type="submit" class="btn btn-primary">
            {{ editMode ? 'Actualizar' : 'Agregar' }} Especialista
          </button>
          <button type="button" class="btn btn-secondary" (click)="cancelarEdicion(); mostrarFormulario = false">Cancelar</button>
        </div>
      </form>
    </div>
  </div>
</div>
